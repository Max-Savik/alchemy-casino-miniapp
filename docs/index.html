<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Themis</title>
  
 <script defer src="https://cdn.jsdelivr.net/npm/lottie-web@5.9.6/build/player/lottie.min.js"></script>

  <!-- === –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ === -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tonweb@0.0.64/dist/tonweb.min.js"></script>

  <link
    href="https://fonts.googleapis.com/css2?family=Forum&family=Cinzel:wght@600;800&family=Uncial+Antiqua&display=swap"
    rel="stylesheet" />
  <!-- monospaced font –¥–ª—è —á–∏—Å–ª–æ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500;600&display=swap" rel="stylesheet" />

  <!-- === –Ω–∞—à–∏ —Å—Ç–∏–ª–∏ / –ª–æ–≥–∏–∫–∞ === -->
  <link rel="stylesheet" href="styles.css" />
  <script src="script.js" defer></script>
  <!-- Telegram Web App SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  :root{ --tg-topbar:0px; --tg-top-extra:12px; --tg-banner-shift:8px; }
  /* ===== NFT CARD STYLES (–∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ) ===== */
  .nft-card{
    position:relative;
    overflow:hidden;
    border-radius:12px;
    aspect-ratio:1/1;
    background:transparent;
  }
/* ===== NFT CARD IMAGE ===== */
/* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ë–ï–ó –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è, —á—Ç–æ–±—ã –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ –º–∏–≥–∞–ª–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ */
.nft-card .nft-img{
  position:absolute;
  top:0; left:0; right:0; bottom:0;
  width:100%; height:100%;
  display:block;
  object-fit:cover;
  object-position:center;
  pointer-events:none;
  z-index:0;
  opacity:1;
  transition:none;
}
/* —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏ –≤–∫–ª—é—á–∞–µ–º fade */
#nftPickerOverlay.with-fade .nft-card .nft-img{ opacity:0; transition:opacity .25s ease-out; }
#nftPickerOverlay.with-fade .nft-card .nft-img.loaded{ opacity:1; }
  .price-chip{
    position:absolute;
    top:4px; right:4px;
    display:inline-block;
    padding:1px 6px 2px;
    font:600 11.5px/1 'Manrope',sans-serif;
    letter-spacing:-.01em;
    color:#FFEFB0;
    white-space:nowrap;
    background:rgba(0,0,0,.72);
    border:1px solid rgba(252,211,77,.35);
    border-radius:10px;
    backdrop-filter:blur(6px);
    -webkit-backdrop-filter:blur(6px);
    text-shadow:0 0 2px #000;
    box-shadow:0 0 6px rgba(0,0,0,.55);
    z-index:25;
    pointer-events:none;
  }
/* ===== –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ NFT) ===== */
.title-badge{
  position:absolute;
  left:0; right:0; bottom:0;
  padding:4px 8px 6px;
  font-family:'Cinzel','Forum',serif;
  font-weight:600;
  font-size:12px;
  line-height:1.15;
  letter-spacing:.02em;
  color:#f3f4f6;
  background:linear-gradient(to top, rgba(0,0,0,.85) 0%, rgba(0,0,0,0) 100%);
  display:flex; align-items:flex-end; justify-content:center;
  pointer-events:none;
  z-index:20;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
  /* —Å—Ç–∞—Ç—É—Å–Ω—ã–µ –æ–≤–µ—Ä–ª–µ–∏ –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–Ω–∞ –±—É–¥—É—â–µ–µ) */
  .nft-card .status-overlay{
    position:absolute; inset:0; z-index:30;
    display:flex; align-items:flex-end; justify-content:center;
    padding:10px;
    background:linear-gradient(to top, rgba(0,0,0,.70) 0%, rgba(0,0,0,.25) 45%, rgba(0,0,0,0) 100%);
    backdrop-filter:blur(2px);
  }
  .status-pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 12px; border-radius:9999px;
    font:700 11.5px/1 'Inter','Manrope',sans-serif;
    color:#FDE68A;
    background:rgba(17,24,39,.88);
    border:1px solid rgba(252,211,77,.35);
    box-shadow:0 6px 18px rgba(0,0,0,.45);
    text-shadow:0 0 2px rgba(0,0,0,.6);
  }
  .status-pill .spinner{
    width:14px; height:14px; border-radius:50%;
    border:2px solid rgba(253,230,138,.35);
    border-top-color:#FBBF24;
    animation:spin 1s linear infinite;
  }
  @keyframes spin { to { transform:rotate(360deg); } }
  /* –û–≤–µ—Ä–ª–µ–π –Ω–∞ –≤—Å—é –∏–∫–æ–Ω–∫—É */
  .price-badge {
    position: absolute;
    inset: 0;                           /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å wrapper */
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: rgba(31, 41, 55, 0.85);
    color: #fbbf24;                     /* –∑–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
    font-size: 0.75rem;                 /* —á—É—Ç—å –±–æ–ª—å—à–µ, —á—Ç–æ–±—ã —á–∏—Ç–∞–ª–æ—Å—å */
    line-height: 1;
    white-space: nowrap;
    opacity: 0;                         /* —Å–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
    transition: opacity .15s;
    border-radius: inherit;             /* —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è –æ—Ç wrapper */
  }
  /* === –°–µ—Ç–∫–∞ NFT-–ø–∏–∫–µ—Ä–∞ === */
#nftPicker{
  display:grid;
  gap:.5rem;
  /* –º–∏–Ω–∏–º—É–º 3 –≤ —Ä—è–¥ –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
  grid-template-columns:repeat(3, minmax(0,1fr));
}
@media (min-width: 640px){
  #nftPicker{
    grid-template-columns:repeat(auto-fill, minmax(90px,1fr));
  }
}
  #placeBet{ white-space:nowrap; }
  /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫–ª–∏–∫–∞—é—Ç */
  .price-badge.show {
    opacity: 1 !important;
  }
  
  /* –£–±–∏—Ä–∞–µ–º –ª—é–±—É—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∏–∫–æ–Ω–∫—É –≤ –±–µ–π–¥–∂–µ */
  .price-badge img {
    display: none;
  }
/* === Balance font === */
#tonBalance{
  font-family:'JetBrains Mono','Courier New',monospace;
  font-variant-numeric:tabular-nums;
}
/* ===== TON Picker visibility (fix clicks & a11y) ===== */
#tonPickerOverlay{
  /* –¥—É–±–ª–∏—Ä—É–µ–º —Å—é–¥–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ tailwind-–∫–ª–∞—Å—Å–æ–≤,
     —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º –Ω–∏–∂–µ */
  opacity: 0;
  pointer-events: none;
}
#tonPickerOverlay.show{
  opacity: 1 !important;
  pointer-events: auto !important;
}
#tonPickerOverlay.show [role="dialog"]{
  transform: scale(1) !important; /* –ø–ª–∞–≤–Ω–æ –∏–∑ scale-95 */
}
/* —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –æ–≤–µ—Ä–ª–µ–µ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞–≤—ã */
@supports (height: 100svh) {
  #tonPickerOverlay,
  #nftPickerOverlay {
    min-height: 100svh;
  }
}

/* === WIN MODAL: –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –º–∏–Ω–∏–∞—Ç—é—Ä, —á—Ç–æ–±—ã –Ω–µ –Ω–∞–µ–∑–∂–∞–ª–∏ === */
#winGainedGrid{
  /* –ø–µ—Ä–µ–±–∏–≤–∞–µ–º tailwind-–∫–ª–∞—Å—Å grid-cols-5 */
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)) !important;
  align-content: start;
}
/* –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –±–µ–π–¥–∂ —Ü–µ–Ω—ã –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç–∏–Ω–∫–∏ */
#winGainedGrid .price-chip{ z-index: 25; }

  /* –¢–ï–ö–°–¢ –ù–ê –ö–ê–†–¢–û–ß–ö–ê–• –í –û–ö–ù–ï –ü–û–ë–ï–î–´ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤–ª–µ–∑–∞–µ—Ç */
#winOverlay .nft-card .title-badge{
  /* —Ä–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –∏ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—É—é –æ–±—Ä–µ–∑–∫—É */
  white-space: normal;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;        /* –º–∞–∫—Å–∏–º—É–º 2 —Å—Ç—Ä–æ–∫–∏ */
  line-clamp: 2;

  /* –ª–æ–º–∞–µ–º –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã/–¥–µ—Ñ–∏—Å—ã */
  overflow-wrap: anywhere;

  /* —á—É—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ —à—Ä–∏—Ñ—Ç, —á—Ç–æ–±—ã –Ω–µ –µ—Ö–∞–ª–æ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ç–∞–π–ª–∞—Ö */
  font-size: 11px;
  padding: 4px 6px 6px;
}

/* —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –¥–ª—è —É—Å–µ—á–µ–Ω–∏—è –≤ —Ñ–ª–µ–∫—Å–∞—Ö/–∞–±—Å–æ–ª—é—Ç–µ */
.nft-card .title-badge{ min-width: 0; }

/* –¢–µ–∫—Å—Ç –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –≤ –º–æ–¥–∞–ª–∫–µ –≤—ã–±–æ—Ä–∞ NFT ‚Äî –ø–µ—Ä–µ–Ω–æ—Å + 2 —Å—Ç—Ä–æ–∫–∏ */
#nftPickerOverlay .nft-card .title-badge{
  white-space: normal;
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;   /* –º–∞–∫—Å–∏–º—É–º 2 —Å—Ç—Ä–æ–∫–∏ */
  line-clamp: 2;

  /* –ª–æ–º–∞–µ–º –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã */
  overflow-wrap: anywhere;

  /* —á—É—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ —à—Ä–∏—Ñ—Ç + –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã, –∫–∞–∫ –≤ –æ–∫–Ω–µ –ø–æ–±–µ–¥—ã */
  font-size: 11px;
  padding: 4px 6px 6px;
}
/* ===== Telegram top bar spacer + banner ===== */
header.sticky{ top:calc(var(--tg-topbar) + var(--tg-top-extra)) !important; }
.container, main#mainContent{
  /* —Å–¥–≤–∏–≥ –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–Ω–∏–∑ –Ω–∞ –≤–µ–ª–∏—á–∏–Ω—É —Ç–µ–ª–µ–≥—Ä–∞–º-—Ö–µ–¥–µ—Ä–∞,
     —á—Ç–æ–±—ã –Ω–∞—à header –Ω–µ –Ω–∞–µ–∑–∂–∞–ª –Ω–∞ –∫–æ–ª–µ—Å–æ */
  margin-top: calc(var(--tg-topbar) + var(--tg-top-extra));
}
#gameSection{ padding-top:.75rem !important; }
.tg-top-area{
  position:fixed;
  top:0; left:0; right:0;
  height:calc(var(--tg-topbar) + var(--tg-top-extra));
  z-index:65;                 /* –≤—ã—à–µ –Ω–∞—à–µ–≥–æ header, –Ω–∏–∂–µ –º–æ–¥–∞–ª–æ–∫ */
  pointer-events:none;        /* –∫–ª–∏–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∞–º –±–∞–Ω–Ω–µ—Ä */
  display:none;               /* –≤–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç–æ–º —Ç–æ–ª—å–∫–æ –≤ Telegram */
}
#topPromoBanner{
  position:absolute; left:50%;
  top:calc(50% + var(--tg-banner-shift)); /* –±–∞–Ω–Ω–µ—Ä —á—É—Ç—å –Ω–∏–∂–µ */
  transform:translateX(-50%);
  pointer-events:auto;
  max-width:min(70vw,380px);  /* –±–∞–Ω–Ω–µ—Ä –µ—â–µ —á—É—Ç—å –¥–ª–∏–Ω–Ω–µ–µ */
  padding:.46rem 1.05rem;     /* –∏ –≤—ã—à–µ */
  font:700 14.5px/1.25 'Inter','Manrope',sans-serif;
  color:#1b1405; text-align:center; white-space:nowrap;
  display:inline-flex; align-items:center; gap:.5rem;   /* –∏–∫–æ–Ω–∫–∞ + —Ç–µ–∫—Å—Ç */
  background:linear-gradient(135deg,#fcd56a 0%,#d29b35 40%,#a96e08 100%);
  border-radius:999px;
  border:1px solid rgba(252,211,77,.45);
  box-shadow:0 4px 14px rgba(0,0,0,.45), 0 0 8px rgba(200,160,80,.35);
}

/* ellipsis —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–∫—Å—Ç–µ, —á—Ç–æ–±—ã –∏–∫–æ–Ω–∫–∞ –Ω–µ —Å–∂–∏–º–∞–ª–∞—Å—å */
#topPromoBanner .label{ min-width:0; max-width:100%; overflow:hidden; text-overflow:ellipsis; display:inline-block; }
#topPromoBanner .ico{ width:16px; height:16px; flex:0 0 auto; }
@supports (padding: max(0px)) {
  /* —É—á–∏—Ç—ã–≤–∞–µ–º –≤—ã—Ä–µ–∑—ã (iOS/Android) */
  .tg-top-area{ height:calc(var(--tg-topbar) + var(--tg-top-extra) + env(safe-area-inset-top)); }
  header.sticky{ top:calc(var(--tg-topbar) + var(--tg-top-extra) + env(safe-area-inset-top)) !important; }
}
.tg-ios #topPromoBanner{ top:calc(42% + var(--tg-banner-shift)); }
@media (max-width:360px){
  #topPromoBanner{ max-width:58vw; font-size:12.5px; padding:.38rem .74rem; }
}
  
</style>

</head>

<body class="flex flex-col min-h-screen bg-gray-950 text-gray-200">
  <!-- ===== –¢–µ–ª–µ–≥—Ä–∞–º-—Ç–æ–ø-–∑–æ–Ω–∞ —Å –±–∞–Ω–Ω–µ—Ä–æ–º (–º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ TG) ===== -->
  <div id="tgTopArea" class="tg-top-area">
    <a id="topPromoBanner" href="https://t.me/alchemist_nft" target="_blank" rel="noopener"
       aria-label="Alchemist News ‚Äî Telegram –∫–∞–Ω–∞–ª">
      <!-- SVG ¬´–≥–∞–∑–µ—Ç–∞¬ª -->
      <svg class="ico" viewBox="0 0 24 24" fill="none"
           stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7z"/>
        <path d="M8 11h8"/>
        <path d="M8 15h8"/>
        <path d="M4 17a3 3 0 0 0 3 3"/>
      </svg>
      <span class="label"> Alchemist News</span>
    </a>
  </div>
    <div id="lottieOverlay"
       class="fixed inset-0 z-50 flex items-center justify-center">
    <div id="lottieContainer"
         class="w-48 h-48">
      <!-- Lottie –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å—é–¥–∞ -->
    </div>
  </div>
  <!-- ========== HEADER ========== -->
  <header class="glass sticky top-0 z-50 shadow-lg border-b border-amber-600/30">
    <div class="header-row max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
      <!-- –ª–æ–≥–æ—Ç–∏–ø -->
      <a class="text-2xl font-extrabold glow-text flex items-center gap-1 flex-none">
        <span class="font-['Uncial Antiqua']">‚òø</span>Themis
      </a>
      <div class="flex-grow"></div>
      <div class="flex items-center gap-2">
        <!-- –±–∞–ª–∞–Ω—Å TON -->
        <div id="balanceBox" class="flex items-center gap-1 flex-none px-2 py-1 rounded-full ton-pill">
          <img src="https://s3.coinmarketcap.com/static/img/portraits/6304d4f7dcf54d0fb59743ba.png"
               alt="TON" width="16" height="16" loading="lazy" />
          <span id="tonBalance" class="text-sm font-semibold">0.00</span>
        </div>
        <!-- –∫–Ω–æ–ø–∫–∞ Wallet -->
        <button id="openWalletWindow" class="wallet-btn flex items-center gap-1 flex-none">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
               stroke="#1b1405" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 7h20v12H2z" />
            <path d="M18 7V5a2 2 0 0 0-2-2H2v4" />
          </svg>
          <span class="wallet-label">WALLET</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ========== MAIN ========== -->
<main id="mainContent"
      class="container mx-auto px-4 lg:px-8 flex-grow opacity-0 transition-opacity duration-500 ease-out">


    <!-- ‚ñ∏‚ñ∏‚ñ∏ GAME / –ö–û–¢–ï–õ ‚ñ∏‚ñ∏‚ñ∏ -->
    <section id="gameSection"
             class="flex flex-col items-center px-2 py-1 sm:py-2 gap-0 pb-24 sm:pb-0">
      <!-- ===== FLEX-–ö–û–ù–¢–ï–ô–ù–ï–†: –∫–æ—Ç—ë–ª + –±–ª–æ–∫ —Å—Ç–∞–≤–æ–∫ ===== -->
<div class="w-full
            mx-auto
            flex flex-col
            lg:grid lg:grid-cols-2 lg:gap-16
            gap-4
            max-w-7xl">


<!-- ===== CAULDRON & SPIN ===== -->
<div class="relative flex flex-col items-center gap-1 order-1 sm:order-none">
  <!-- —Ç–µ–ø–µ—Ä—å flex-—Å—Ç—Ä–æ–∫–∞ –¥–ª—è –∫–Ω–æ–ø–∫–∏ + —Ç–∞–π–º–µ—Ä–∞ -->
  <div class="flex items-center">
    <button id="historyBtn" aria-label="–ò—Å—Ç–æ—Ä–∏—è">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M12 8v4l3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        <path d="M21 12a9 9 0 1 1-9-9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
      </svg>
    </button>
    <div id="countdown" class="text-2xl sm:text-3xl font-['Forum'] glow-text">
      –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤‚Ä¶
    </div>
  </div>

  <!-- –°–∞–º –∫–æ—Ç—ë–ª —Å –∫–æ–ª—ë—Å–∏–∫–æ–º -->
  <div id="wheelWrapper" class="relative">
    <div id="cauldron">
      <svg id="wheelSvg" viewBox="0 0 400 400"></svg>
      <div id="steam"></div>
    </div>
    <div class="pointer"></div>
  </div>
<!-- FAIR PLAY WIDGET -->
<div id="fairPlay"
     class="absolute top-2 right-2 z-20 select-none text-xs">
  <button id="fairBtn"
                      class="flex items-center gap-1 px-2 py-1 rounded-lg
                   bg-gray-800/80 ring-1 ring-amber-500/40
                   hover:bg-gray-800/95 transition">
    <svg class="w-3.5 h-3.5 shrink-0" viewBox="0 0 24 24" fill="none"
         stroke="#fbbf24" stroke-width="2" stroke-linecap="round"
         stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"/>
    </svg>
    <span id="commitShort" class="font-mono tracking-tight">Hash</span>
  </button>

  <!-- —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º—ã–π –±–ª–æ–∫ -->
  <div id="fairPanel"
            class="hidden absolute top-full right-0 mt-1 w-72 p-3 space-y-2
                bg-gray-900/95 rounded-xl ring-1 ring-amber-500/40
                shadow-lg backdrop-blur-sm">
<p class="flex items-center gap-2">
  <span class="text-gray-400">Commit:</span>
  <code id="commitFull" class="break-all text-amber-300"></code>

  <!-- –ù–û–í–ê–Ø –∫–Ω–æ–ø–∫–∞ -->
  <button id="copyCommit"
          class="shrink-0 hover:opacity-80 transition">
    <!-- –ª—é–±–æ–π –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π clipboard-svg -->
<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"
     stroke="currentColor" stroke-width="2"
     stroke-linecap="round" stroke-linejoin="round">
  <!-- –ü–µ—Ä–µ–¥–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç -->
  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
  <!-- –ó–∞–¥–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç -->
  <path d="M5 15V5a2 2 0 0 1 2-2h8"></path>
</svg>

  </button>
</p>
  </div>
</div>

<div
  id="potDisplay"
  class="glass border-ornate alch-rounded px-4 py-2 text-xl sm:text-2xl glow-text font-['Forum']"
>
  –û–±—â–∏–π –±–∞–Ω–∫: <span id="pot">0.00 TON</span>
</div>


</div>


        <!-- ===== BET / PICKER ===== -->
        <div class="glass border-ornate alch-rounded p-6 sm:p-10 w-full max-w-md order-2 sm:order-none mx-auto">
          <h2 class="text-xl sm:text-3xl mb-5 sm:mb-8 glow-text font-['Forum']">
            –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
          </h2>
          <div class="flex gap-4 sm:gap-6 justify-center">
            <button id="depositNFT" class="alch-btn flex items-center justify-center gap-2">
              <svg class="bet-icon" viewBox="0 0 24 24" fill="none" stroke="#1b1405" stroke-width="2" stroke-linejoin="round">
                <polygon points="4,7 12,3 20,7 12,11" fill="none" />
                <polygon points="4,7 12,11 12,19 4,15" fill="none" />
                <polygon points="20,7 12,11 12,19 20,15" fill="none" />
              </svg>
              <span>NFT</span>
            </button>
            <button id="depositTON" class="alch-btn flex items-center justify-center gap-2">
              <svg class="bet-icon" viewBox="0 0 512 512" fill="none" stroke="#1b1405" stroke-width="30" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="150,150 362,150 256,384" />
                <line x1="256" y1="150" x2="256" y2="384" />
              </svg>
              <span>TON</span>
            </button>
          </div>
        </div>

<!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –≤—ã–±–æ—Ä–∞ NFT -->
<div id="nftPickerOverlay" class="fixed inset-0 flex items-center justify-center bg-black/70 z-50 hidden">
<!-- –Ω–∞—á–∞–ª–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ -->
<div class="filter-panel bg-gray-800/90 backdrop-blur-md rounded-2xl p-6 space-y-6 border border-amber-600/40 shadow-2xl w-11/12 max-w-md">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ -->
  <div class="flex justify-between items-center">
    <h3 class="text-2xl font-semibold text-amber-300">–í—ã–±–µ—Ä–∏—Ç–µ NFT</h3>
    <button id="closePicker" class="text-gray-400 hover:text-white transition" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
  </div>


  <!-- –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω—ã -->
  <div class="flex flex-col gap-1">
    <label for="priceRange" class="text-gray-300 text-sm">–ú–∞–∫—Å. —Ü–µ–Ω–∞ (TON)</label>
    <div class="flex items-center gap-3">
      <input id="priceRange"
             type="range"
             min="0"
             max="200"
             step="1"
             value="200"
             class="flex-grow h-2 rounded-lg appearance-none bg-amber-600/30 focus:outline-none" />
      <span id="priceValue" class="w-20 text-right text-amber-300 font-semibold">200 TON</span>
    </div>
  </div>

  <!-- –ë–ª–æ–∫ ¬´–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ¬ª —Å –ø–æ–ª–∑—É–Ω–∫–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ -->
<div class="flex flex-col gap-1">
  <label for="selectCount" class="text-gray-300 text-sm">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
  <div class="flex items-center gap-3">
    <!-- –°–∞–º –ø–æ–ª–∑—É–Ω–æ–∫ -->
    <input id="selectCount"
           type="range"
           min="0"
           max="0"
           step="1"
           value="0"
           class="flex-grow h-2 rounded-lg appearance-none bg-amber-600/30 focus:outline-none" />

    <!-- –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ -->
    <span id="countValue" class="w-8 text-right text-amber-300 font-semibold">0</span>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ -->
<button id="toggleSort"
        class="p-2 bg-gray-700 hover:bg-gray-600 rounded-full transition-transform duration-200"
        aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏">
  <svg xmlns="http://www.w3.org/2000/svg"
       class="w-5 h-5 text-amber-300 transition-transform duration-200"
       viewBox="0 0 20 20"
       fill="currentColor">
    <!-- chevron-down –Ω–∞ —Å—Ç–∞—Ä—Ç–µ (—Å—Ç—Ä–µ–ª–∫–∞ –≤–Ω–∏–∑) -->
    <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
  </svg>
</button>
  </div>
</div>

  <!-- –°–µ—Ç–∫–∞ NFT -->
<div id="nftPicker"
     class="grid
            max-h-64
            overflow-y-auto
            p-1">
  </div>

  <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
  <div class="flex justify-end gap-4">
    <button id="clearFilters"
            class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg font-medium transition">
      –°–±—Ä–æ—Å–∏—Ç—å
    </button>
    <button id="placeBet"
            class="px-6 py-2 bg-amber-500 hover:bg-amber-600 text-gray-900 rounded-lg font-semibold transition
                   disabled:opacity-50 whitespace-nowrap flex-shrink-0 min-w-[10rem]"
            disabled>
      –ü–æ—Å—Ç–∞–≤–∏—Ç—å
    </button>
  </div>
</div>
</div>


<!-- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π TON-–ø–∏–∫–µ—Ä -->
<div id="tonPickerOverlay"
     class="fixed inset-0 flex items-center justify-center bg-black/70 z-50 transition-opacity duration-300 opacity-0 pointer-events-none"
     aria-hidden="true">
  <div
    class="bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-md rounded-2xl p-6 w-11/12 max-w-sm ring-1 ring-amber-500/50 shadow-2xl transform scale-95 transition-transform duration-300"
    role="dialog" aria-modal="true" aria-labelledby="tonPickerTitle">
    <div class="flex justify-between items-center mb-4">
      <h3 id="tonPickerTitle" class="text-2xl font-semibold text-amber-300">–°—Ç–∞–≤–∫–∞ TON</h3>
      <button id="closeTonPicker"
              class="text-gray-400 hover:text-amber-300 transition-colors text-4xl leading-none"
              aria-label="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ">&times;</button>
    </div>
    <div class="mb-4">
      <label for="tonAmount"
             class="block text-gray-200 mb-2">–°—É–º–º–∞, TON:</label>
      <div class="relative">
        <input id="tonAmount"
               type="number"
               min="0.1" step="0.1"
               inputmode="decimal" enterkeyhint="done"
               class="w-full pr-10 p-3 rounded-lg bg-gray-700 text-gray-100 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-400"
               placeholder="0.00" />
        <!-- –ò–∫–æ–Ω–∫–∞ TON –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—è -->
        <span class="absolute top-1/2 right-3 -translate-y-1/2 text-gray-400">
          <!-- inline TON icon ‚Äî –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è -->
          <svg viewBox="0 0 256 256" class="w-5 h-5" aria-hidden="true">
            <path d="M128 222 26 76a20 20 0 0 1 16-32h172a20 20 0 0 1 16 32L128 222Z"
                  fill="currentColor" opacity=".2"/>
            <path d="M128 222 26 76a20 20 0 0 1 16-32h172a20 20 0 0 1 16 32Z"
                  fill="none" stroke="currentColor" stroke-width="20" stroke-linejoin="round"/>
            <path d="M128 222V44" fill="none" stroke="currentColor" stroke-width="20" stroke-linecap="round"/>
            </svg>
        </span>
      </div>
    </div>
    <!-- –ë—ã—Å—Ç—Ä—ã–µ —à–∞–≥–∏: +1 / +5 / +10 / MAX -->
    <div class="flex flex-wrap gap-2 mb-4 -mt-1">
      <button type="button"
              class="ton-step px-3 py-1 rounded-lg bg-gray-700/70 hover:bg-gray-600 ring-1 ring-amber-500/40 text-amber-200 text-sm"
              data-delta="1">+1 TON</button>
      <button type="button"
              class="ton-step px-3 py-1 rounded-lg bg-gray-700/70 hover:bg-gray-600 ring-1 ring-amber-500/40 text-amber-200 text-sm"
              data-delta="5">+5 TON</button>
      <button type="button"
              class="ton-step px-3 py-1 rounded-lg bg-gray-700/70 hover:bg-gray-600 ring-1 ring-amber-500/40 text-amber-200 text-sm"
              data-delta="10">+10 TON</button>
      <button type="button" id="tonMax"
              class="px-3 py-1 rounded-lg bg-gray-700/70 hover:bg-gray-600 ring-1 ring-amber-500/40 text-amber-200 text-sm ml-auto">MAX</button>
    </div>
    <div class="text-right">
      <button id="placeTonBet"
              disabled
              class="inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium bg-amber-500/90 hover:bg-amber-500 active:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path d="M12 4v16m8-8H4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        –ü–æ—Å—Ç–∞–≤–∏—Ç—å
      </button>
    </div>
  </div>
</div>
<!-- ‚ñ∏‚ñ∏‚ñ∏ WALLET MODAL ‚ñ∏‚ñ∏‚ñ∏ -->
<div id="walletOverlay"
     class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm hidden">

  <div
    class="w-11/12 max-w-sm p-6 rounded-2xl bg-gray-800/90 ring-1 ring-amber-500/50 shadow-2xl">

    <!-- ‚îÄ‚îÄ –∑–∞–≥–æ–ª–æ–≤–æ–∫ + Ton Connect + ¬´√ó¬ª ‚îÄ‚îÄ -->
    <div class="flex items-center gap-3 mb-5">
      <h3 class="flex-grow text-2xl font-semibold text-amber-300">
        –ë–∞–ª–∞–Ω—Å TON
      </h3>

      <!-- TonConnect-UI —Å–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å—é–¥–∞ -->
      <div id="tonConnectBtn"></div>

      <button id="walletClose"
              class="text-3xl leading-none text-gray-400 hover:text-amber-300">
        &times;
      </button>
    </div>

    <!-- ‚îÄ‚îÄ –≤–∫–ª–∞–¥–∫–∏ ‚îÄ‚îÄ -->
    <div class="flex mb-6">
      <button id="tabDeposit"
              class="flex-1 py-2 text-center rounded-t-lg bg-amber-500/90 text-gray-900 font-semibold">
        –ü–æ–ø–æ–ª–Ω–∏—Ç—å
      </button>
      <button id="tabWithdraw"
              class="flex-1 py-2 text-center rounded-t-lg bg-gray-700/60 text-gray-300">
        –í—ã–≤–µ—Å—Ç–∏
      </button>
      <button id="tabTx"
              class="flex-1 py-2 text-center rounded-t-lg bg-gray-700/60 text-gray-300">
        –ò—Å—Ç–æ—Ä–∏—è
      </button>
    </div>

    <!-- ‚ñ∏‚ñ∏‚ñ∏ –ü–û–ü–û–õ–ù–ò–¢–¨ ‚ñ∏‚ñ∏‚ñ∏ -->
    <div id="panelDeposit">
      <label for="walletAmount"
             class="block mb-2 text-gray-300">–°—É–º–º–∞ TON:</label>
      <input id="walletAmount" type="number" min="0.01" step="0.01"
             class="w-full mb-6 p-3 rounded-lg bg-gray-700 text-gray-100 placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-amber-400"
             placeholder="0.00" />
      <button id="walletDepositBtn" disabled
              class="w-full py-2 rounded-lg font-semibold flex justify-center
                     bg-amber-500/90 hover:bg-amber-500 active:bg-amber-600
                     disabled:opacity-50">
        –ü–æ–ø–æ–ª–Ω–∏—Ç—å
      </button>
    </div>

    <!-- ‚ñ∏‚ñ∏‚ñ∏ –í–´–í–ï–°–¢–ò ‚ñ∏‚ñ∏‚ñ∏ -->
    <div id="panelWithdraw" class="hidden">
      <label for="withdrawAmount"
             class="block mb-2 text-gray-300">–°—É–º–º–∞ TON:</label>
      <input id="withdrawAmount" type="number" min="0.01" step="0.01"
             class="w-full mb-6 p-3 rounded-lg bg-gray-700 text-gray-100 placeholder-gray-400
                    focus:outline-none focus:ring-2 focus:ring-amber-400"
             placeholder="0.00" />
      <button id="walletWithdrawBtn" disabled
              class="w-full py-2 rounded-lg font-semibold flex justify-center
                     bg-rose-500/90 hover:bg-rose-500 active:bg-rose-600
                     disabled:opacity-50">
        –í—ã–≤–µ—Å—Ç–∏
      </button>
    </div>

    <!-- ‚ñ∏‚ñ∏‚ñ∏ –ò–°–¢–û–†–ò–Ø ‚ñ∏‚ñ∏‚ñ∏ -->
    <div id="panelTx"
         class="hidden max-h-72 overflow-y-auto divide-y divide-gray-700 text-sm">
      <!-- –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
    </div>

  </div>
</div>




      </div>

      <!-- ===== PLAYERS LIST ===== -->
      <div class="glass border-ornate alch-rounded mt-2 p-6 sm:p-10 w-full max-w-md shadow-[0_0_60px_rgba(0,0,0,0.85)]">
        <h3 class="text-xl sm:text-3xl mb-5 sm:mb-8 glow-text font-['Forum']">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
        <ul id="players" class="space-y-4 sm:space-y-5 text-base sm:text-lg"></ul>
      </div>
    </section>

    <!-- ‚ñ∏‚ñ∏‚ñ∏ PROFILE ‚ñ∏‚ñ∏‚ñ∏ -->
    <section id="profileSection" class="hidden px-4 py-10 sm:py-14">
      <h2 class="text-3xl mb-6 glow-text font-['Forum']">–ú–æ–∏ NFT</h2>
      <div id="profileGrid" class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>
    <section id="marketSection" class="hidden px-4 py-8">‚Ä¶–ú–∞—Ä–∫–µ—Ç (—Å–∫–æ—Ä–æ)‚Ä¶</section>
    <section id="earnSection"   class="hidden px-4 py-8">‚Ä¶–î–æ—Ö–æ–¥ (—Å–∫–æ—Ä–æ)‚Ä¶</section>
  </main>

  <!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
  <nav class="bottom-nav flex justify-around">
    <button id="navGame" class="nav-link flex flex-col items-center">
      <svg class="nav-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
           stroke-linecap="round" stroke-linejoin="round">
        <rect x="2" y="7" width="20" height="10" rx="2" ry="2" />
        <circle cx="8" cy="12" r="1.5" />
        <path d="M12 10v4" />
        <path d="M11 12h2" />
        <path d="M16 11v2" />
        <path d="M15 12h2" />
      </svg>
      <span class="nav-lbl">–ò–≥—Ä—ã</span>
    </button>
    <button id="navMarket" class="nav-link flex flex-col items-center">
      <svg class="nav-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
           stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1.5" />
        <circle cx="19" cy="21" r="1.5" />
        <path d="M1 1h4l2.68 13.39a2 2 0 001.97 1.61h9.72a2 2 0 001.97-1.61L23 6H6" />
      </svg>
      <span class="nav-lbl">–ú–∞—Ä–∫–µ—Ç</span>
    </button>
      <button id="navProfile" onclick="location.href='profile.html'"
              class="nav-link flex flex-col items-center">
      <svg class="nav-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
           stroke-linecap="round" stroke-linejoin="round">
        <path d="M20 21v-2a4 4 0 0 0-3-3.87" />
        <path d="M4 21v-2a4 4 0 0 1 3-3.87" />
        <circle cx="12" cy="7" r="4" />
      </svg>
      <span class="nav-lbl">–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
<button id="navEarn" onclick="location.href='earn.html'" class="nav-link flex flex-col items-center">
  <svg class="nav-ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
       stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="8" />
    <path d="M12 14V10" />
    <path d="M10 12l2-2 2 2" />
  </svg>
  <span class="nav-lbl">–î–æ—Ö–æ–¥</span>
</button>
  </nav>
  <!-- ‚ñ∏‚ñ∏‚ñ∏ WIN MODAL ‚ñ∏‚ñ∏‚ñ∏ -->
<div id="winOverlay"
     class="fixed inset-0 z-[60] hidden items-center justify-center bg-black/70 backdrop-blur-sm">
  <div class="w-11/12 max-w-lg p-6 rounded-2xl bg-gray-800/95 ring-1 ring-amber-500/50 shadow-2xl">
    <div class="flex items-start justify-between mb-3">
      <h3 class="text-2xl font-semibold text-amber-300">–í—ã –ø–æ–±–µ–¥–∏–ª–∏! üéâ</h3>
      <button id="winClose" class="text-3xl leading-none text-gray-400 hover:text-amber-300">&times;</button>
    </div>

    <!-- –ò—Ç–æ–≥–∏ —Ä–∞—É–Ω–¥–∞ (–ø—Ä–æ—Å—Ç–∞—è —á–∏—Ç–∞–µ–º–∞—è —Å–≤–æ–¥–∫–∞) -->
    <div class="space-y-2 mb-4 text-sm">
      <!-- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ -->
      <div class="flex items-center justify-between p-3 rounded-xl bg-gray-700/60">
        <div class="text-gray-400">–ù–∞—á–∏—Å–ª–µ–Ω–æ –Ω–∞ –±–∞–ª–∞–Ω—Å</div>
        <div class="text-emerald-400 font-semibold"><span id="winPayoutTon">0.00</span>&nbsp;TON</div>
      </div>
      <!-- –í–æ–∑–≤—Ä–∞—Ç (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ, –±–µ–∑ ¬´–≤ —Ç.—á.¬ª) -->
      <div id="winRefundWrap" class="flex items-center justify-between p-3 rounded-xl bg-gray-700/60 hidden">
        <div class="text-gray-400">–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∑–∞ –ø–æ–¥–∞—Ä–æ–∫</div>
        <div class="text-emerald-300 font-semibold">+<span id="winRefundTon">0.00</span>&nbsp;TON</div>
      </div>
      <!-- –ö–æ–º–∏—Å—Å–∏—è TON -->
      <div id="winCommTonRow" class="flex items-center justify-between p-3 rounded-xl bg-gray-700/60">
        <div class="text-gray-400">–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ä–≤–∏—Å–∞ (TON)</div>
        <div class="text-rose-400 font-semibold">‚àí<span id="winCommTon">0.00</span>&nbsp;TON</div>
      </div>
      <!-- –ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ä–≤–∏—Å–æ–º (NFT) -->
      <div id="winCommNftWrap" class="flex items-center justify-between p-3 rounded-xl bg-gray-700/60 hidden">
        <div class="text-gray-400">–ö–æ–º–∏—Å—Å–∏—è —Å–µ—Ä–≤–∏—Å–æ–º (NFT)</div>
        <div class="text-rose-300 font-semibold">
          <span id="winCommNftCount">0</span>&nbsp;—à—Ç. ‚âà <span id="winCommNftTon">0.00</span>&nbsp;TON
        </div>
      </div>
      <!-- –¢–µ—Ö. —Å–≤–æ–¥–∫–∞ –ø–æ –±–∞–Ω–∫—É -->
      <div class="grid grid-cols-2 gap-3">
        <div class="p-3 rounded-xl bg-gray-700/60">
          <div class="text-gray-400">TON-–±–∞–Ω–∫ —Ä–∞—É–Ω–¥–∞</div>
          <div class="mt-1 text-gray-200 font-semibold"><span id="winPotTon">0.00</span>&nbsp;TON</div>
        </div>
        <div class="p-3 rounded-xl bg-gray-700/60">
          <div class="text-gray-400">–í–∞—à–∞ TON-—Å—Ç–∞–≤–∫–∞</div>
          <div class="mt-1 text-gray-200 font-semibold"><span id="winOwnTon">0.00</span>&nbsp;TON</div>
        </div>
      </div>
      <div class="text-xs text-gray-500">
        –ö–æ–º–∏—Å—Å–∏—è –≤–∑–∏–º–∞–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å–æ–º. –ï—Å–ª–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–∫ –∫–æ–º–∏—Å—Å–∏—è NFT –±–æ–ª—å—à–µ –Ω—É–∂–Ω–æ–π ‚Äî —Ä–∞–∑–Ω–∏—Ü—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –≤–∞—à –±–∞–ª–∞–Ω—Å –≤ TON.
      </div>
    </div>

    <!-- –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ NFT -->
    <div>
      <div class="text-gray-300 mb-2">–ü–æ–ª—É—á–µ–Ω–Ω—ã–µ NFT</div>
      <div id="winGainedGrid" class="grid grid-cols-5 gap-2 max-h-56 overflow-y-auto">
        <!-- —Å—é–¥–∞ –ø—Ä–∏–ª–µ—Ç—è—Ç –∏–∫–æ–Ω–∫–∏ -->
      </div>
      <div id="winNoNft" class="text-gray-500 text-sm hidden">NFT –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ –≤ —ç—Ç–æ–º —Ä–∞—É–Ω–¥–µ.</div>
    </div>

    <div class="mt-5 flex items-center justify-between gap-3">
      <button id="winShare"
              class="inline-flex items-center gap-2 px-4 py-2 rounded-lg font-semibold
                     bg-emerald-500/90 hover:bg-emerald-500 active:bg-emerald-600">
        <!-- share icon -->
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <path d="M8.59 13.51l6.83 3.98M15.41 6.51L8.59 10.49"></path>
        </svg>
        –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–±–µ–¥–æ–π
      </button>
      <button id="winOk"
              class="px-4 py-2 rounded-lg font-semibold bg-amber-500/90 hover:bg-amber-500 active:bg-amber-600">
        –ü–æ–Ω—è—Ç–Ω–æ
      </button>
    </div>
  </div>
</div>
</body>

<script>
(() => {
  const overlay = document.getElementById('winOverlay');
  const btnOk   = document.getElementById('winOk');
  const btnX    = document.getElementById('winClose');
  const btnShare= document.getElementById('winShare');

  // ‚ñ∏‚ñ∏‚ñ∏ –®–∞—Ä–∏–Ω–≥ –ø–æ–±–µ–¥—ã: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç + —Å—Å—ã–ª–∫–∞ –Ω–∞ @themis_gifts_bot
  function readText(elId){ return (document.getElementById(elId)?.textContent || '0.00').trim(); }
  function buildShareText({ payout }){
    // @themis_gifts_bot –≤ –¢–µ–ª–µ–≥—Ä–∞–º–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ —Å–∞–º–æ –ø–æ —Å–µ–±–µ,
    // —Ç–∞–∫ —á—Ç–æ ¬´–≥–æ–ª–∞—è¬ª —Å—Å—ã–ª–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞.
    return [
      'üèÜ –ü–æ–±–µ–¥–∞ –≤ Themis',
      '',
      `–ò—Ç–æ–≥: +${payout} TON`,
      '',
      '–ó–∞–ª–µ—Ç–∞–π –∏ –ø–æ–ø—Ä–æ–±—É–π –∑–∞—Ç–∞—â–∏—Ç—å –≤ @themis_gifts_bot'
    ].join('\n');
  }
  async function shareWin(){
    const payout = readText('winPayoutTon');
    const text   = buildShareText({ payout });

    // 1) –ø—Ä–æ–±—É–µ–º –Ω–∞—Ç–∏–≤–Ω—ã–π Web Share (—Å —Ç–µ–∫—Å—Ç–æ–º –∏ —Å—Å—ã–ª–∫–æ–π)
    try {
      if (navigator.share) {
        // –ù–µ –ø–µ—Ä–µ–¥–∞—ë–º url, —á—Ç–æ–±—ã –Ω–µ –ø–æ—è–≤–ª—è–ª–∞—Å—å ¬´–≥–æ–ª–∞—è¬ª —Å—Å—ã–ª–∫–∞ ‚Äî
        // –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–µ @themis_gifts_bot –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–µ
        await navigator.share({ title: 'Themis ‚Äî –ø–æ–±–µ–¥–∞', text });
        return;
      }
    } catch(e){ /* no-op */ }

    // 2) fallback ‚Äî Telegram share —Å —Ç–µ–∫—Å—Ç–æ–º + —Å—Å—ã–ª–∫–æ–π
    const tgUrl = 'https://t.me/share/url?text=' + encodeURIComponent(text);
    if (window.Telegram?.WebApp?.openTelegramLink){
      window.Telegram.WebApp.openTelegramLink(tgUrl);
    } else {
      window.open(tgUrl, '_blank');
    }
  }
  btnShare?.addEventListener('click', shareWin);
})();
</script>
<!-- ===== Telegram top bar sizing & banner behavior ===== -->
<script>
(function(){
  const WebApp = window.Telegram && Telegram.WebApp;
  const root = document.documentElement;
  const area = document.getElementById('tgTopArea');
  const banner = document.getElementById('topPromoBanner');

  function setTopbarHeight(){
    // —ç–≤—Ä–∏—Å—Ç–∏–∫–∞: —É Telegram –≤—ã—Å–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ö–µ–¥–µ—Ä–∞ ~50 (iOS) / 56 (Android)
    let h = 0;
    if (WebApp){
      const ios = WebApp.platform === 'ios';
      if (ios){
       const rootEl = document.documentElement;
       rootEl.classList.add('tg-ios');                 // —Ñ–ª–∞–≥ –¥–ª—è CSS
       rootEl.style.setProperty('--tg-top-extra','40px');     // –µ—â—ë –Ω–∏–∂–µ header + –∏–≥—Ä–æ–≤–∞—è —Å–µ–∫—Ü–∏—è
       rootEl.style.setProperty('--tg-banner-shift','10px');  // –ª—ë–≥–∫–∏–π –ø–æ–¥—ä—ë–º –±–∞–Ω–Ω–µ—Ä–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ
     }
      h = ios ? 50 : 56;
      area.style.display = 'block';
    } else {
      area.style.display = 'none';
    }
    root.style.setProperty('--tg-topbar', h + 'px');
  }

  setTopbarHeight();
  // —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏/–∫–ª–∞–≤—ã/–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
  WebApp?.onEvent('viewportChanged', setTopbarHeight);

  banner?.addEventListener('click', (e)=>{
    e.preventDefault();
    const url = banner.getAttribute('href');
    // t.me ‚Äî —á–µ—Ä–µ–∑ openTelegramLink; –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –æ–±—ã—á–Ω–∞—è —Å—Å—ã–ª–∫–∞
    if (WebApp?.openTelegramLink && /^https?:\/\/t\.me\//i.test(url)) {
      WebApp.openTelegramLink(url);
    } else if (WebApp?.openLink) {
      WebApp.openLink(url);
    } else {
      window.open(url, '_blank');
    }
  });
})();
</script>
</html>





